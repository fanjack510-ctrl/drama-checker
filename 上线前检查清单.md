# ä¸Šçº¿å‰æ£€æŸ¥æ¸…å• - æœ€å°æ”¹åŠ¨è¡¥ä¸

## âœ… æ£€æŸ¥ç»“æœ

### 1. backend/main.py âœ… å·²å°±ç»ª

**æ£€æŸ¥é¡¹ï¼š**
- âœ… `GET /health` ç«¯ç‚¹å­˜åœ¨ï¼Œè¿”å› `{"ok": true}`
- âœ… `POST /api/analyze` ç«¯ç‚¹å­˜åœ¨
- âœ… text é•¿åº¦æ ¡éªŒï¼š10-5000 å­—ç¬¦

**å½“å‰ä»£ç çŠ¶æ€ï¼š**
```python
# ç¬¬ 22-25 è¡Œï¼šå¥åº·æ£€æŸ¥ç«¯ç‚¹
@app.get("/health", response_model=HealthResponse)
async def health_check():
    """å¥åº·æ£€æŸ¥ç«¯ç‚¹"""
    return HealthResponse(ok=True)  # âœ… è¿”å› {"ok": true}

# ç¬¬ 28-65 è¡Œï¼šåˆ†æç«¯ç‚¹
@app.post("/api/analyze", response_model=AnalyzeResponse)
async def analyze_script(request: AnalyzeRequest):
    # âœ… ç¬¬ 45-55 è¡Œï¼šæ–‡æœ¬é•¿åº¦æ ¡éªŒ
    if len(text) < MIN_TEXT_LENGTH:  # MIN_TEXT_LENGTH = 10
        raise HTTPException(...)
    if len(text) > MAX_TEXT_LENGTH:  # MAX_TEXT_LENGTH = 5000
        raise HTTPException(...)
```

**ç»“è®ºï¼š** æ— éœ€ä¿®æ”¹

---

### 2. CORS ä¸­é—´ä»¶ âœ… å·²å°±ç»ª

**æ£€æŸ¥é¡¹ï¼š**
- âœ… CORS ä¸­é—´ä»¶å­˜åœ¨
- âœ… `allow_origins=["*"]` å·²é…ç½®ï¼ˆå…è®¸è”è°ƒï¼‰

**å½“å‰ä»£ç çŠ¶æ€ï¼š**
```python
# backend/main.py ç¬¬ 13-19 è¡Œ
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],  # âœ… å·²é…ç½®ï¼Œå…è®¸æ‰€æœ‰æ¥æº
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

**ç»“è®ºï¼š** æ— éœ€ä¿®æ”¹

---

### 3. requirements.txt âœ… å·²å°±ç»ª

**æ£€æŸ¥é¡¹ï¼š**
- âœ… fastapi
- âœ… uvicorn
- âœ… pydantic
- âœ… requests

**å½“å‰æ–‡ä»¶å†…å®¹ï¼š**
```
fastapi==0.104.1
uvicorn[standard]==0.24.0
pydantic==2.5.0
requests>=2.31.0
```

**ç»“è®ºï¼š** æ— éœ€ä¿®æ”¹

---

### 4. Procfile âœ… å·²å°±ç»ª

**æ£€æŸ¥é¡¹ï¼š**
- âœ… å†…å®¹é€‚ç”¨äº Railway
- âœ… ä½¿ç”¨ `$PORT` ç¯å¢ƒå˜é‡

**å½“å‰æ–‡ä»¶å†…å®¹ï¼š**
```
web: uvicorn main:app --host 0.0.0.0 --port $PORT
```

**ç»“è®ºï¼š** æ— éœ€ä¿®æ”¹

---

## ğŸ“‹ æœ€ç»ˆç»“è®º

**âœ… æ‰€æœ‰æ£€æŸ¥é¡¹å‡å·²å°±ç»ªï¼Œæ— éœ€ä¿®æ”¹ï¼**

é¡¹ç›®å·²æ»¡è¶³ä¸Šçº¿å‰çš„åŸºæœ¬è¦æ±‚ï¼š
1. âœ… å¥åº·æ£€æŸ¥ç«¯ç‚¹æ­£ç¡®
2. âœ… API ç«¯ç‚¹æ­£ç¡®
3. âœ… æ–‡æœ¬é•¿åº¦æ ¡éªŒæ­£ç¡®
4. âœ… CORS é…ç½®æ­£ç¡®
5. âœ… ä¾èµ–å®Œæ•´
6. âœ… Procfile é…ç½®æ­£ç¡®

---

## ğŸš€ ä¸Šçº¿å‰æœ€åç¡®è®¤æ­¥éª¤

### Railway éƒ¨ç½²å‰ç¡®è®¤ï¼š

1. **ç¡®è®¤ backend/config.py ä¸­çš„æ–‡æœ¬é•¿åº¦é™åˆ¶ï¼š**
   ```python
   MIN_TEXT_LENGTH = 10   # âœ… å·²ç¡®è®¤
   MAX_TEXT_LENGTH = 5000  # âœ… å·²ç¡®è®¤
   ```

2. **ç¡®è®¤ Procfile åœ¨ backend ç›®å½•ä¸‹ï¼š**
   ```
   backend/Procfile  # âœ… å·²å­˜åœ¨
   ```

3. **ç¡®è®¤ requirements.txt åœ¨ backend ç›®å½•ä¸‹ï¼š**
   ```
   backend/requirements.txt  # âœ… å·²å­˜åœ¨
   ```

4. **ç¡®è®¤æ‰€æœ‰ Python æ–‡ä»¶åœ¨ backend ç›®å½•ä¸‹ï¼š**
   - âœ… backend/main.py
   - âœ… backend/schema.py
   - âœ… backend/scorer_rules.py
   - âœ… backend/config.py

### å‰ç«¯éƒ¨ç½²å‰ç¡®è®¤ï¼š

1. **ç¡®è®¤ index.html åœ¨æ ¹ç›®å½•ï¼š**
   ```
   index.html  # âœ… å·²å­˜åœ¨
   ```

2. **ç¡®è®¤ config.js åœ¨æ ¹ç›®å½•ï¼š**
   ```
   config.js  # âœ… å·²å­˜åœ¨
   ```

3. **éƒ¨ç½²åéœ€è¦ä¿®æ”¹ config.jsï¼š**
   ```javascript
   // éƒ¨ç½²åä¿®æ”¹ä¸º Railway åç«¯åœ°å€
   window.__CONFIG__ = {
     API_BASE_URL: 'https://ä½ çš„railwayåŸŸå'
   };
   ```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **Railway éƒ¨ç½²æ—¶ï¼š**
   - Root Directory è®¾ç½®ä¸ºï¼š`backend`
   - Start Command ç•™ç©ºï¼ˆRailway ä¼šè‡ªåŠ¨ä½¿ç”¨ Procfileï¼‰

2. **Vercel éƒ¨ç½²æ—¶ï¼š**
   - Framework Presetï¼šé€‰æ‹© `Other`
   - Build Commandï¼šç•™ç©º
   - Output Directoryï¼šç•™ç©º

3. **CORS å®‰å…¨æé†’ï¼š**
   - å½“å‰ `allow_origins=["*"]` å…è®¸æ‰€æœ‰æ¥æº
   - ç”Ÿäº§ç¯å¢ƒå»ºè®®æ”¹ä¸ºå…·ä½“åŸŸååˆ—è¡¨ï¼š
   ```python
   allow_origins=[
       "https://your-project.vercel.app",
       "https://your-custom-domain.com"
   ]
   ```

---

## ğŸ“ æ— éœ€ä¿®æ”¹çš„æ–‡ä»¶æ¸…å•

ä»¥ä¸‹æ–‡ä»¶å·²å°±ç»ªï¼Œæ— éœ€ä¿®æ”¹ï¼š

- âœ… `backend/main.py` - æ‰€æœ‰ç«¯ç‚¹æ­£ç¡®
- âœ… `backend/schema.py` - æ•°æ®æ¨¡å‹å®Œæ•´
- âœ… `backend/scorer_rules.py` - è¯„åˆ†å¼•æ“å®Œæ•´
- âœ… `backend/config.py` - é…ç½®æ­£ç¡®
- âœ… `backend/requirements.txt` - ä¾èµ–å®Œæ•´
- âœ… `backend/Procfile` - Railway é…ç½®æ­£ç¡®
- âœ… `index.html` - å‰ç«¯ä»£ç å®Œæ•´
- âœ… `config.js` - API é…ç½®å·²å°±ç»ª

---

**æ€»ç»“ï¼šé¡¹ç›®å·²æ»¡è¶³ä¸Šçº¿è¦æ±‚ï¼Œå¯ä»¥ç›´æ¥éƒ¨ç½²ï¼** ğŸ‰

